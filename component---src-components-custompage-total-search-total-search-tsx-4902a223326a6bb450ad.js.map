{"version":3,"file":"component---src-components-custompage-total-search-total-search-tsx-4902a223326a6bb450ad.js","mappings":"kQAcMA,EAAqB,SACzBC,EACAC,GAEA,OAAKD,EAIgB,IAAjBC,EAAMC,OACDC,EAAAA,cAAAA,OAAAA,KAAAA,eAEAA,EAAAA,cAACC,EAAAA,EAAD,CAAMC,MAAOJ,IANbE,EAAAA,cAAAA,EAAAA,SAAAA,OAkBLG,EAAkB,SAAC,GAAD,IACtBC,EADsB,EACtBA,MACAC,EAFsB,EAEtBA,YACAR,EAHsB,EAGtBA,QACAS,EAJsB,EAItBA,WACAC,EALsB,EAKtBA,cALsB,OAOtBP,EAAAA,cAACQ,EAAAA,EAAD,CAAQJ,MAAK,YAAcA,EAASC,YAAaA,GAC/CL,EAAAA,cAACS,EAAAA,EAAD,MACAT,EAAAA,cAACU,EAAAA,EAAD,CAAMN,MAAM,SACVJ,EAAAA,cAAAA,MAAAA,KACEA,EAAAA,cAAAA,MAAAA,CAAKW,UC/CO,qCDgDVX,EAAAA,cAAAA,QAAAA,CACEW,UChDe,4CDiDfC,YAAY,eACZC,KAAK,YACLC,SAAU,SAACC,GACTT,EAAWS,EAAEC,OAAOC,QAEtBA,MAAOpB,QAAAA,EAAW,MAGrBU,MA0CT,EA7BoB,WAAO,IAAD,EACxB,GAAyCW,EAAAA,EAAAA,MAAjCd,EAAR,EAAQA,MAAiBC,EAAzB,EAAec,SAETC,EAAK,UAVI,SAACC,GAChB,IAAQC,GAAWC,EAAAA,EAAAA,eAAXD,OAGR,OAFe,IAAIE,gBAAgBF,GAErBG,IAAIJ,SAAQK,EAMZC,CAAS,YAAZ,aAAoBD,EACzB5B,GAAgB8B,EAAAA,EAAAA,IAAmBR,QAAAA,EAAS,IAClD,GAA8BS,EAAAA,EAAAA,UAA6BT,GAApDvB,EAAP,KAAgBS,EAAhB,KAWA,OATAwB,EAAAA,EAAAA,YAAU,WACJjC,IACFkC,EAAAA,EAAAA,UAAS,aAAaC,mBAAmBnC,GAAY,CACnDoC,SAAS,EACTC,MAAO,CAAEC,oBAAoB,OAGhC,CAACtC,IAGFG,EAAAA,cAACG,EAAD,CAEIC,MAAOA,EACPC,YAAaA,EACbR,QAAAA,EACAS,WAAAA,EACAC,cAAeX,EAAmBC,EAASC","sources":["webpack://gatsby-starter-lumen/./src/components/Custompage/TotalSearch/TotalSearch.tsx","webpack://gatsby-starter-lumen/./src/components/Custompage/TotalSearch/TotalSearch.module.scss"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport { useLocation } from \"@gatsbyjs/reach-router\";\nimport { navigate } from \"gatsby\";\n\nimport { Feed } from \"@/components/Feed\";\nimport { Layout } from \"@/components/Layout\";\nimport { Page } from \"@/components/Page\";\nimport { Sidebar } from \"@/components/Sidebar\";\nimport { useSiteMetadata, useTotalSearchList } from \"@/hooks\";\nimport { Edge } from \"@/types\";\n\nimport * as styles from \"./TotalSearch.module.scss\";\n\nconst toSearchResultView = (\n  keyword: string | undefined,\n  items: Edge[],\n): React.ReactNode => {\n  if (!keyword) {\n    return <></>;\n  }\n\n  if (items.length === 0) {\n    return <span>검색 결과가 없습니다</span>;\n  } else {\n    return <Feed edges={items} />;\n  }\n};\n\ninterface TotalViewProps {\n  title: string;\n  description: string;\n  keyword: string | undefined;\n  setKeyword: (keyword: string) => void;\n  resultContent: React.ReactNode;\n}\n\nconst TotalSearchView = ({\n  title,\n  description,\n  keyword,\n  setKeyword,\n  resultContent,\n}: TotalViewProps) => (\n  <Layout title={`Search - ${title}`} description={description}>\n    <Sidebar />\n    <Page title=\"전체 검색\">\n      <div>\n        <div className={styles.search}>\n          <input\n            className={styles.searchKeyword}\n            placeholder=\"검색어를 입력 해주세요\"\n            name=\"searchbar\"\n            onChange={(e) => {\n              setKeyword(e.target.value);\n            }}\n            value={keyword ?? \"\"}\n          />\n        </div>\n        {resultContent}\n      </div>\n    </Page>\n  </Layout>\n);\n\nconst useQuery = (key: string): string | undefined => {\n  const { search } = useLocation();\n  const params = new URLSearchParams(search);\n\n  return params.get(key) || undefined;\n};\n\nconst TotalSearch = () => {\n  const { title, subtitle: description } = useSiteMetadata();\n\n  const query = useQuery(\"q\") ?? undefined;\n  const items: Edge[] = useTotalSearchList(query ?? \"\");\n  const [keyword, setKeyword] = useState<string | undefined>(query);\n\n  useEffect(() => {\n    if (keyword) {\n      navigate(`/search?q=${encodeURIComponent(keyword)}`, {\n        replace: true,\n        state: { shouldUpdateScroll: false },\n      });\n    }\n  }, [keyword]);\n\n  return (\n    <TotalSearchView\n      {...{\n        title: title as string,\n        description: description as string,\n        keyword,\n        setKeyword,\n        resultContent: toSearchResultView(keyword, items),\n      }}\n    />\n  );\n};\n\nexport default TotalSearch;\n","// extracted by mini-css-extract-plugin\nexport var search = \"TotalSearch-module--search--aZIhb\";\nexport var searchKeyword = \"TotalSearch-module--search-keyword--iOIAR\";\nexport var skillsLayout = \"TotalSearch-module--skills-layout--9u5bv\";\nexport var skillsLayout__backButton = \"TotalSearch-module--skills-layout__back-button--YjdJg\";\nexport var skillsWrap = \"TotalSearch-module--skills-wrap--mebnz\";"],"names":["toSearchResultView","keyword","items","length","React","Feed","edges","TotalSearchView","title","description","setKeyword","resultContent","Layout","Sidebar","Page","className","placeholder","name","onChange","e","target","value","useSiteMetadata","subtitle","query","key","search","useLocation","URLSearchParams","get","undefined","useQuery","useTotalSearchList","useState","useEffect","navigate","encodeURIComponent","replace","state","shouldUpdateScroll"],"sourceRoot":""}