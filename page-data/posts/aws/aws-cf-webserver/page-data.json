{"componentChunkName":"component---src-templates-post-template-post-template-tsx","path":"/posts/aws/aws-cf-webserver/","result":{"data":{"markdownRemark":{"id":"62dd0441-d0d0-575a-957d-0ac453f270c0","html":"<h1 id=\"웹서버-구축\" style=\"position:relative;\"><a href=\"#%EC%9B%B9%EC%84%9C%EB%B2%84-%EA%B5%AC%EC%B6%95\" aria-label=\"웹서버 구축 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>웹서버 구축</h1>\n<p>웹서버를 구축하기 위해선 생각 해봐야 할 것들이 있는데, 보통 물리적 공간에 웹서버(보통 <code class=\"language-text\">apache</code> or <code class=\"language-text\">nginx</code>)를 설치하고 정적 파일들을 올려놓은 후 해당 위치를 바라보도록 웹서버 셋팅을 하면 된다.</p>\n<p>딱히 어려운건 없지만 인프라 구축 자체가 귀찮은게 많으니 이러한 작업을 AWS를 사용해서 구축하면 엄청 편하고 빠르게 배포가 가능하다.</p>\n<p>기술 스택</p>\n<ul>\n<li>S3</li>\n<li>CloudFront\n<ol>\n<li>OAI</li>\n</ol>\n</li>\n<li>CRA</li>\n</ul>\n<p><code class=\"language-text\">route53</code>도 사용하고 싶지만, 보유한 도메인도 없고 돈도 없어서 생략</p>\n<p>기술 스택을 보면 아는 사람은 짐작하겠지만 CRA(<code class=\"language-text\">React</code>)로 만들어진 소스를 빌드해서 <code class=\"language-text\">S3</code>에 올려놓고 <code class=\"language-text\">Cloud Front</code>에서 빌드된 파일을 접근하여 서비스 하는 형태로 구축한다.</p>\n<hr>\n<h2 id=\"버킷-생성\" style=\"position:relative;\"><a href=\"#%EB%B2%84%ED%82%B7-%EC%83%9D%EC%84%B1\" aria-label=\"버킷 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>버킷 생성</h2>\n<p>버킷은 원하는 이름 및 리전만 선택해서 디폴트 옵션으로 생성해도 충분하다. 주의할 것은 <code class=\"language-text\">모든 퍼블릭 엑세스 차단</code>을 체크 해서 생성한다(아마도 디폴트 옵션이 차단 활성화).</p>\n<h2 id=\"소스파일-빌드-및-s3에-업로드\" style=\"position:relative;\"><a href=\"#%EC%86%8C%EC%8A%A4%ED%8C%8C%EC%9D%BC-%EB%B9%8C%EB%93%9C-%EB%B0%8F-s3%EC%97%90-%EC%97%85%EB%A1%9C%EB%93%9C\" aria-label=\"소스파일 빌드 및 s3에 업로드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>소스파일 빌드 및 S3에 업로드</h2>\n<p>먼저 서비스하고 싶은 <code class=\"language-text\">CRA</code>소스 파일을 빌드해서 <code class=\"language-text\">S3</code>에 업로드 해놓는다. 밑에 내용은 샘플 소스를 <code class=\"language-text\">git clone</code>해서 사용한 것이다.</p>\n<ul>\n<li>샘플 소스 다운로드 및 빌드</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ git clone https://github.com/qweasd147/AwsStudy.git\n$ cd ./AwsStudy/cloudfront/webserver/\n\n$ yarn install\n$ yarn build</code></pre></div>\n<ul>\n<li>S3로 파일 업로드</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ aws s3 sync ./build s3://버킷명 --delete --output text</code></pre></div>\n<p><code class=\"language-text\">aws-cli</code>를 설치하면 cli로도 가능한데 웹에서 직접 올려도 상관없다.</p>\n<h2 id=\"cloud-front-설정\" style=\"position:relative;\"><a href=\"#cloud-front-%EC%84%A4%EC%A0%95\" aria-label=\"cloud front 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cloud Front 설정</h2>\n<p>다른 항목은 이전 <code class=\"language-text\">Cloud Front</code> 설명을 참조해서 만들면 되지만 주의해서 셋팅해야하는 부분이 있다.</p>\n<h3 id=\"cloud-front-생성-시-옵션\" style=\"position:relative;\"><a href=\"#cloud-front-%EC%83%9D%EC%84%B1-%EC%8B%9C-%EC%98%B5%EC%85%98\" aria-label=\"cloud front 생성 시 옵션 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cloud Front 생성 시 옵션</h3>\n<ul>\n<li>\n<p>Restrict Bucket Access(버킷 access 제한)</p>\n<p>CloudFront를 통해서만 버킷 접근을 허용 할지 여부. <code class=\"language-text\">예</code>를 선택하면 <code class=\"language-text\">OAI</code> 선택 창이 보이는데 필요에 따라 새로운 <code class=\"language-text\">OAI</code> 생성 또는 기존 <code class=\"language-text\">OAI</code>를 사용 선택</p>\n</li>\n<li>\n<p>Grant Read Permissions on Bucket</p>\n<p>CloudFront가 원본(s3)에 접근 권한을 자동으로 부여 할지 여부. 그냥 yes</p>\n</li>\n<li>\n<p>Default Root Object</p>\n<p>기본 접근 파일. cra로 만들어져 모든 접근 파일인 <code class=\"language-text\">index.html</code>로 입력</p>\n</li>\n</ul>\n<p>이렇게 3개만 주의해서 생성하면 된다.</p>\n<h3 id=\"라우팅-설정에러페이지-셋팅\" style=\"position:relative;\"><a href=\"#%EB%9D%BC%EC%9A%B0%ED%8C%85-%EC%84%A4%EC%A0%95%EC%97%90%EB%9F%AC%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%85%8B%ED%8C%85\" aria-label=\"라우팅 설정에러페이지 셋팅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>라우팅 설정(에러페이지 셋팅)</h3>\n<p>위 내용까지 셋팅하면 <code class=\"language-text\">CloudFront</code>에서 제공해주는 도메인으로 <code class=\"language-text\">S3</code>에 존재하는 하위 디렉토리 및 파일들을 찾아가도록 셋팅한 것이다. 근데 우리는 <code class=\"language-text\">React App</code>이니까 <code class=\"language-text\">URL</code>의 주소가 어찌되어 있던 <code class=\"language-text\">index.html</code>로 접근하여 <code class=\"language-text\">React</code> 소스 레벨에서 라우팅 처리가 되도록 셋팅해야 한다.</p>\n<p>생성된 <code class=\"language-text\">Cloud Front</code>를 선택 -> <code class=\"language-text\">Error Pages</code>를 클릭하면 에러 페이지 셋팅이 가능하고, <code class=\"language-text\">403</code>, <code class=\"language-text\">404</code>일때 <code class=\"language-text\">/index.html</code>로 보내 어플리케이션 레벨에서 모든 처리가 이루어 지도록 셋팅하면 된다.</p>\n<table>\n<thead>\n<tr>\n<th>HTTP Error Code</th>\n<th>Response Page Path</th>\n<th>Http Response Code</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>403</td>\n<td>/index.html</td>\n<td>200</td>\n</tr>\n<tr>\n<td>404</td>\n<td>/index.html</td>\n<td>200</td>\n</tr>\n</tbody>\n</table>\n<p>이런식으로 셋팅하면 어플리케이션 레벨(<code class=\"language-text\">React</code>)에서 모든 라우팅 처리를 맡기게 셋팅된다.\n캐싱 기간은 디폴트값으로 사용해도 충분할꺼라 생각된다.</p>\n<h2 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h2>\n<p>이렇게 까지 셋팅해야 보다 안전하고 빠른 웹서버 구축이 된다. 중요한 부분을 몇가지 다시 생각해보면</p>\n<h4 id=\"1-외부에서-s3-접근-불가\" style=\"position:relative;\"><a href=\"#1-%EC%99%B8%EB%B6%80%EC%97%90%EC%84%9C-s3-%EC%A0%91%EA%B7%BC-%EB%B6%88%EA%B0%80\" aria-label=\"1 외부에서 s3 접근 불가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 외부에서 S3 접근 불가</h4>\n<p>처음 <code class=\"language-text\">S3</code>를 만들 때 <code class=\"language-text\">퍼블릭 엑세스 차단</code>을 체크하였고, <code class=\"language-text\">S3</code>에서 <code class=\"language-text\">정적 웹 사이트 호스팅</code> 또한 하지 않았다. 따라서 외부에서 <code class=\"language-text\">S3</code>에 직접 접근 할 수도, 버킷명도 알아낼 방법이 없어 보안적으로 좋아진다.</p>\n<h4 id=\"2-ssl-적용이-쉽다\" style=\"position:relative;\"><a href=\"#2-ssl-%EC%A0%81%EC%9A%A9%EC%9D%B4-%EC%89%BD%EB%8B%A4\" aria-label=\"2 ssl 적용이 쉽다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. SSL 적용이 쉽다</h4>\n<p><code class=\"language-text\">Cloud Front</code>를 사용함으로써 기본적으로 SSL 사용이 쉽게 셋팅이 된다\n정적 웹서버 호스팅은 aws 내에서도 여러가지 방법이 존재하긴 한다.</p>\n<ol>\n<li>S3에서 <code class=\"language-text\">정적 웹 사이트 호스팅</code></li>\n<li><code class=\"language-text\">route53</code>에서 S3로 직접 연결</li>\n</ol>\n<p>이런 방법들이 있긴 하지만 SSL 적용을 이보다 편하게 할 수는 없는걸로 알고 있다.</p>\n<h4 id=\"3-모든-라우팅-처리는-어플리케이션-레벨\" style=\"position:relative;\"><a href=\"#3-%EB%AA%A8%EB%93%A0-%EB%9D%BC%EC%9A%B0%ED%8C%85-%EC%B2%98%EB%A6%AC%EB%8A%94-%EC%96%B4%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EB%A0%88%EB%B2%A8\" aria-label=\"3 모든 라우팅 처리는 어플리케이션 레벨 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 모든 라우팅 처리는 어플리케이션 레벨</h4>\n<p>CDN 서버 입장해선 접근 시 무조건 index.html로 보내게 된다(<code class=\"language-text\">/</code>, <code class=\"language-text\">403</code>, <code class=\"language-text\">404</code> 한정).</p>\n<h4 id=\"4-웹서버-관리가-필요없다\" style=\"position:relative;\"><a href=\"#4-%EC%9B%B9%EC%84%9C%EB%B2%84-%EA%B4%80%EB%A6%AC%EA%B0%80-%ED%95%84%EC%9A%94%EC%97%86%EB%8B%A4\" aria-label=\"4 웹서버 관리가 필요없다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 웹서버 관리가 필요없다.</h4>\n<p>내가 직접 웹서버를 구축하고 관리하는게 아니라 다 aws에서 관리해주니까 성능, 관리 측면에서 엄청난 이득이다.</p>\n<hr>\n<h2 id=\"안될-시-점검-사항\" style=\"position:relative;\"><a href=\"#%EC%95%88%EB%90%A0-%EC%8B%9C-%EC%A0%90%EA%B2%80-%EC%82%AC%ED%95%AD\" aria-label=\"안될 시 점검 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>안될 시 점검 사항</h2>\n<ul>\n<li>cloudfront를 통해 S3 접근이 안될 때(403)</li>\n</ul>\n<p><code class=\"language-text\">Grant Read Permissions on Bucket</code> 이 옵션은 <code class=\"language-text\">S3</code>에 해당 <code class=\"language-text\">CloudFront</code>의 읽기 권한을 자동으로 추가 해준다고 하였다. 근데 최근에 <code class=\"language-text\">AWS</code>쪽 버그인지 해당 옵션을 주고 생성하여도 접근을 못한 적이 있었다. 혹시나 셋팅을 다 끝냈는데 막상 요청해보면 <code class=\"language-text\">403</code>이 뜬다면 <code class=\"language-text\">S3</code>에 접근 권한이 추가 되어있는지 확인 먼저 해보는게 좋다.</p>\n<p><code class=\"language-text\">S3</code> 이동 -> <code class=\"language-text\">버킷 선택</code> -> 권한 탭 이동\n순서대로 이동 하면 중간에 <code class=\"language-text\">버킷 정책</code>이라고 있는데 여기에 <code class=\"language-text\">CloudFront</code>의 OAI가 잘 붙어 있는지 확인한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"Version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2008-10-17\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"Id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"PolicyForCloudFrontPrivateContent\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"Statement\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"Sid\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"Effect\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Allow\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"Principal\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"AWS\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity CF의_OAI_ID\"</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"Action\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"s3:GetObject\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"Resource\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"arn:aws:s3:::버킷명/*\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이런식으로 잘 등록 되어있나 눈으로 확인이 가능하고, 추가로 버킷에 특정 디렉토리 하위만 접근 가능하도록 수정 가능하다(<code class=\"language-text\">Resource</code>에서 수정)</p>","fields":{"slug":"/posts/aws/aws-cf-webserver/","tagSlugs":["/tag/aws/","/tag/cloudfront/","/tag/cdn/","/tag/web-server/","/tag/infra/"]},"frontmatter":{"date":"2020-08-12T07:52:44.005Z","description":"Cloud Front를 써서 React로 만들어진 어플리케이션 배포","tags":["aws","cloudfront","cdn","web server","infra"],"title":"AWS - Cloud Front - WebServer","socialImage":null}}},"pageContext":{"slug":"/posts/aws/aws-cf-webserver/"}},"staticQueryHashes":["251939775","357378587","401334301"]}