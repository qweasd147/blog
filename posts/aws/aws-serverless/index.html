<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" name="twitter:image" content="https://qweasd147.github.io"/><meta data-react-helmet="true" name="twitter:description" content="서버 리소스 관리가 귀찮을때"/><meta data-react-helmet="true" name="twitter:title" content="Serverless - Blog by joohyung"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" property="og:image" content="https://qweasd147.github.io"/><meta data-react-helmet="true" property="og:site_name" content="Serverless - Blog by joohyung"/><meta data-react-helmet="true" name="description" content="서버 리소스 관리가 귀찮을때"/><meta name="theme-color" content="hsl(31, 92%, 62%)"/><meta name="generator" content="Gatsby 4.17.0"/><style data-href="/blog/styles.0ad89aece188ac638a5b.css" data-identity="gatsby-global-css">html{font-size:100}body{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizelegibility;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#212121;font-size:16px;line-height:1.625;margin:0 0 0 calc(100vw - 100%)}body,h1,h2,h3,h4,h5,h6{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif}h1,h2,h3,h4,h5,h6{font-weight:600}h1{font-size:40px;line-height:52px;margin-bottom:26px;margin-top:104px}h2{font-size:27px;line-height:39px}h2,h3{margin-bottom:13px;margin-top:52px}h3{font-size:22px;line-height:26px}h4{font-size:19.2px;margin-top:39px}h4,h5{line-height:26px;margin-bottom:13px}h5,h6{font-size:16px;margin-top:65px}h6{line-height:26px;margin-bottom:13px}img{max-width:100%}hr,img{border:0;display:block}hr{background-image:linear-gradient(180deg,transparent 1px,transparent 11px,#212121 0,#212121 15px,transparent 0,transparent 26px);background-size:100% 26px;color:#212121;height:26px;margin:52px auto;width:100px}a{color:#5c92ff;text-decoration:none}a:active,a:focus,a:hover{color:#f7a145}b,strong{font-weight:600}ul{list-style:square;margin-bottom:26px}ul li{margin-bottom:10px;padding:0 5px}p{line-height:26px;margin-bottom:26px}blockquote{border-left:5px solid #39f;font-style:italic;padding:0}blockquote>p{padding-left:15px}blockquote>p>code[class*=language-]{overflow-wrap:break-word}figure{display:block;height:auto;width:100%}figcaption{color:#212121;font-size:14px;font-style:italic;line-height:19.5px;margin-bottom:0;margin-top:6.5px;text-align:center}.anchor{margin-left:-30px!important;padding-right:14px!important}@media screen and (min-width:685px){figure.float-left,figure.float-right{max-width:310px;padding:0 26px}.float-right{float:right}.float-left{float:left}}body :not(pre)>code.language-text{background-color:rgba(27,31,35,.05);color:#000;display:inline-block;max-width:100%;white-space:inherit}body :not(pre)>code.language-text::selection{background-color:#d2d8fb}body code[class*=language-],body pre[class*=language-]{background-color:#000;color:#dcdcdc}body code[class*=language-] ::selection,body pre[class*=language-] ::selection{background-color:#d2d8fb;color:#fff}body .token.atrule,body .token.attr-value,body .token.keyword{color:#39f}body .token.punctuation{color:#dcdcdc}table{border-collapse:collapse;border-top:1px solid #444;width:100%}td,th{border-bottom:1px solid #444;padding:10px;text-align:center}a{overflow-wrap:break-word}code[class*=language-],pre[class*=language-]{word-wrap:normal;color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#073642}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{background:#eee8d5;color:#657b83;cursor:help}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.Content-module--content--uGfLc{margin:0 auto;max-width:1100px;padding:0 15px}.Content-module--content__title--P67He{font-size:32px;font-weight:600;line-height:42.9px;margin:26px auto 0;max-width:950px;text-align:center}.Content-module--content__body--ESt1v figure{margin-bottom:26px}.Content-module--content__body--ESt1v figure blockquote{font-style:italic;margin-top:0;padding:26px 0;text-align:center}.Content-module--content__body--ESt1v figure blockquote p{font-size:26.9072px;line-height:39px;margin-bottom:26px;margin-top:0;max-width:950px}.Content-module--content__body--ESt1v a{text-decoration:underline}.Content-module--content__body--ESt1v *{margin-left:auto;margin-right:auto;max-width:950px}.Content-module--content__body--ESt1v img{max-width:100%}@media screen and (min-width:960px){.Content-module--content--uGfLc{padding:0}.Content-module--content__title--P67He{font-size:48px;line-height:58.5px;margin-bottom:39px;margin-top:58.5px}.Content-module--content__body--ESt1v,.Content-module--content__body--ESt1v p{font-size:18px;line-height:29.25px;margin-bottom:29.25px}}.Skills-module--skills-layout__back-button--WtT2H{border:1px solid #e6e6e6;border-radius:20px;color:#212121;cursor:pointer;display:block;font-size:16px;font-weight:400;height:35px;line-height:35px;margin-left:auto;margin-right:auto;margin-top:26px;max-width:90px;padding:0 24px;text-align:center}.Skills-module--skills-layout__back-button--WtT2H:focus,.Skills-module--skills-layout__back-button--WtT2H:hover{color:#5c92ff}.Skills-module--skills-layout--ni4Gs .Skills-module--skills-wrap--K9NpF{grid-column-gap:3px;grid-row-gap:2px;display:grid;grid-template-columns:none}.Skills-module--skills-layout--ni4Gs .Skills-module--skills-wrap--K9NpF .Skills-module--skills--HhddO{align-items:flex-start;border-left:1px solid #e1e1e1;display:flex;flex-direction:column;flex-wrap:wrap;margin-bottom:15px;padding-left:25px}.Skills-module--skills-layout--ni4Gs .Skills-module--skills-wrap--K9NpF .Skills-module--skills__header--6ce4u{color:#5d686f;display:block;margin-top:5px}.Skills-module--skills-layout--ni4Gs .Skills-module--skills-wrap--K9NpF .Skills-module--skills__container--QeGTT{padding-left:40px;padding-top:8px}.Skills-module--skills-layout--ni4Gs .Skills-module--skills-wrap--K9NpF .Skills-module--skills__container--QeGTT ul{margin-bottom:5px;margin-top:0;padding-left:0}.Skills-module--skills-layout--ni4Gs .Skills-module--skills-wrap--K9NpF .Skills-module--skills__container--QeGTT ul li{list-style-type:disc;margin-bottom:2px;margin-left:30px;margin-top:0}.Skills-module--skills-layout--ni4Gs .Skills-module--skills-wrap--K9NpF .Skills-module--skills__container--QeGTT ul li span{color:#5d686f}.Skills-module--skills-layout--ni4Gs .Skills-module--skills-wrap--K9NpF .Skills-module--skills__subtitle--1BtKD{color:#5d686f;margin:0}.Skills-module--skills-layout--ni4Gs .Skills-module--skills-wrap--K9NpF .Skills-module--skills__subtitle--1BtKD:not(:first-child){margin-top:0}@media screen and (min-width:960px){.Skills-module--skills-layout__back-button--WtT2H{left:30px;margin:0;max-width:auto;position:fixed;top:30px}.Skills-module--skills-layout--ni4Gs .Skills-module--skills-wrap--K9NpF{grid-template-columns:repeat(3,1fr)}}.Feed-module--feed--piBJn .Feed-module--item--x6Y5v{margin-bottom:32.5px}.Feed-module--feed--piBJn .Feed-module--item--x6Y5v:last-child{margin-bottom:13px}.Feed-module--feed--piBJn .Feed-module--item--x6Y5v .Feed-module--title--8lL66{font-size:27px;line-height:39px;margin-bottom:13px;margin-top:0}.Feed-module--feed--piBJn .Feed-module--item--x6Y5v .Feed-module--title--8lL66 .Feed-module--link--YSO-D{color:#212121}.Feed-module--feed--piBJn .Feed-module--item--x6Y5v .Feed-module--title--8lL66 .Feed-module--link--YSO-D:focus,.Feed-module--feed--piBJn .Feed-module--item--x6Y5v .Feed-module--title--8lL66 .Feed-module--link--YSO-D:hover{border-bottom:1px solid #212121;color:#212121}.Feed-module--feed--piBJn .Feed-module--item--x6Y5v .Feed-module--description--VzSOs{font-size:16px;line-height:26px;margin-bottom:19.5px}.Feed-module--feed--piBJn .Feed-module--item--x6Y5v .Feed-module--meta--JQwiD .Feed-module--time--coZK5{color:#212121;font-size:14px;font-weight:600;text-transform:uppercase}.Feed-module--feed--piBJn .Feed-module--item--x6Y5v .Feed-module--meta--JQwiD .Feed-module--divider--gaGDJ{margin:0 13px}.Feed-module--feed--piBJn .Feed-module--item--x6Y5v .Feed-module--meta--JQwiD .Feed-module--category--WfWA4 .Feed-module--link--YSO-D{color:#f7a145;font-size:14px;font-weight:600;text-transform:uppercase}.Feed-module--feed--piBJn .Feed-module--item--x6Y5v .Feed-module--meta--JQwiD .Feed-module--category--WfWA4 .Feed-module--link--YSO-D:focus,.Feed-module--feed--piBJn .Feed-module--item--x6Y5v .Feed-module--meta--JQwiD .Feed-module--category--WfWA4 .Feed-module--link--YSO-D:hover{color:#5c92ff}.Feed-module--feed--piBJn .Feed-module--item--x6Y5v .Feed-module--more--UaTkA{color:#5c92ff;font-size:16px}.Feed-module--feed--piBJn .Feed-module--item--x6Y5v .Feed-module--more--UaTkA:focus,.Feed-module--feed--piBJn .Feed-module--item--x6Y5v .Feed-module--more--UaTkA:hover{border-bottom:1px solid #5c92ff;color:#5c92ff}.SideButton-module--sides--sxqRm{margin-bottom:26px}.SideButton-module--sides-button--pA2tl{align-content:center;align-items:center;background-color:#fff;border:1px solid #ebebeb;border-radius:50%;bottom:10px;color:#212121;cursor:pointer;display:flex;height:50px;justify-content:center;line-height:50px;margin:4px;padding:0;position:fixed;right:15px;text-align:center;transition:all .5s ease-in-out;width:50px}.SideButton-module--sides-button--pA2tl:focus,.SideButton-module--sides-button--pA2tl:hover{color:#5c92ff}.SideButton-module--sides-button-hide--GhQ0J{bottom:-120px!important}@media screen and (min-width:960px){.SideButton-module--sides-button--pA2tl{bottom:100px;right:10px;right:70px}}.Layout-module--layout--LJM9v{margin-left:auto;margin-right:auto;max-width:1200px;position:relative}.Layout-module--layout--LJM9v:before{content:"";display:table}.Layout-module--layout--LJM9v:after{clear:both;content:"";display:table}.Layout-module--layout-doc-mask--qkYmG{height:30%;position:absolute;top:70%}.Page-module--page--JOA3M{margin-bottom:52px}.Page-module--page--JOA3M .Page-module--inner--SzHbJ{padding:26px 19.5px 0}.Page-module--page--JOA3M .Page-module--title--kDOIG{font-size:40px;font-weight:600;line-height:52px;margin-bottom:37.7px;margin-top:0}.Page-module--page--JOA3M .Page-module--body--VhxOl{font-size:16px;line-height:26px;margin:0 0 26px}@media screen and (min-width:685px){.Page-module--page--JOA3M{width:calc(58.275% - 12.5px)}.Page-module--page--JOA3M:nth-child(1n){clear:none;float:left;margin-right:30px}.Page-module--page--JOA3M:last-child{margin-right:0}.Page-module--page--JOA3M:nth-child(12n){float:right;margin-right:0}.Page-module--page--JOA3M:nth-child(12n+1){clear:both}.Page-module--page--JOA3M .Page-module--inner--SzHbJ{padding:32.5px 19.5px 0}}@media screen and (min-width:960px){.Page-module--page--JOA3M{width:calc(66.6% - 10px)}.Page-module--page--JOA3M:nth-child(1n){clear:none;float:left;margin-right:30px}.Page-module--page--JOA3M:last-child{margin-right:0}.Page-module--page--JOA3M:nth-child(3n){float:right;margin-right:0}.Page-module--page--JOA3M:nth-child(3n+1){clear:both}.Page-module--page--JOA3M .Page-module--inner--SzHbJ{padding:39px 26px 0}}.Pagination-module--pagination--1hy6\+{display:flex;margin-top:52px}.Pagination-module--pagination--1hy6\+ .Pagination-module--previous--Sna5M{text-align:left;width:50%}.Pagination-module--pagination--1hy6\+ .Pagination-module--previous--Sna5M .Pagination-module--previousLink--VZDX6{color:#f7a145;font-size:26px;font-weight:700}.Pagination-module--pagination--1hy6\+ .Pagination-module--previous--Sna5M .Pagination-module--previousLink--VZDX6:focus,.Pagination-module--pagination--1hy6\+ .Pagination-module--previous--Sna5M .Pagination-module--previousLink--VZDX6:hover{color:#5c92ff}.Pagination-module--pagination--1hy6\+ .Pagination-module--previous--Sna5M .Pagination-module--previousLink--VZDX6.Pagination-module--disable--fhBRq{color:#9b9b9b;pointer-events:none}.Pagination-module--pagination--1hy6\+ .Pagination-module--next--HKuPy{text-align:right;width:50%}.Pagination-module--pagination--1hy6\+ .Pagination-module--next--HKuPy .Pagination-module--nextLink--Uy-6W{color:#f7a145;font-size:26px;font-weight:700}.Pagination-module--pagination--1hy6\+ .Pagination-module--next--HKuPy .Pagination-module--nextLink--Uy-6W:focus,.Pagination-module--pagination--1hy6\+ .Pagination-module--next--HKuPy .Pagination-module--nextLink--Uy-6W:hover{color:#5c92ff}.Pagination-module--pagination--1hy6\+ .Pagination-module--next--HKuPy .Pagination-module--nextLink--Uy-6W.Pagination-module--disable--fhBRq{color:#9b9b9b;pointer-events:none}.Author-module--author--y9MUW .Author-module--photo--l4ewo{background-clip:padding-box;border-radius:50%;display:inline-block;height:75px;margin-bottom:0;width:75px}.Author-module--author--y9MUW .Author-module--title--z35RG{font-size:18px;font-weight:600;line-height:29.25px;margin:13px 0}.Author-module--author--y9MUW .Author-module--title--z35RG .Author-module--link--CcF2i,.Author-module--author--y9MUW .Author-module--title--z35RG .Author-module--link--CcF2i:focus,.Author-module--author--y9MUW .Author-module--title--z35RG .Author-module--link--CcF2i:hover{color:#212121}.Author-module--author--y9MUW .Author-module--subtitle--huxcU{color:#878787;line-height:26px;margin-bottom:26px}.Icon-module--icon--HX2j3{fill:currentcolor;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;speak:none;stroke:currentcolor;stroke-width:0;display:inline-block;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1em;text-align:center;text-transform:none;width:1em}.Contacts-module--contacts--CReI-{margin-bottom:26px}.Contacts-module--contacts--CReI- .Contacts-module--list--lnC5q{display:flex;flex-flow:row wrap;flex-grow:0;flex-shrink:0;list-style:none;margin:13px 0;max-width:150px;padding:0}.Contacts-module--contacts--CReI- .Contacts-module--list--lnC5q .Contacts-module--item--\+csDa{align-content:center;align-items:center;border:1px solid #ebebeb;border-radius:50%;display:flex;height:35px;justify-content:center;line-height:35px;margin:6.5px;padding:0;text-align:center;width:35px}.Contacts-module--contacts--CReI- .Contacts-module--list--lnC5q .Contacts-module--item--\+csDa:nth-child(3n+1){margin-left:0}.Contacts-module--contacts--CReI- .Contacts-module--list--lnC5q .Contacts-module--item--\+csDa .Contacts-module--link--3h4H4{border:0;color:#212121;display:flex}.Contacts-module--contacts--CReI- .Contacts-module--list--lnC5q .Contacts-module--item--\+csDa .Contacts-module--link--3h4H4:focus,.Contacts-module--contacts--CReI- .Contacts-module--list--lnC5q .Contacts-module--item--\+csDa .Contacts-module--link--3h4H4:hover{color:#5c92ff}.Copyright-module--copyright--LGAkk{color:#999;font-size:14px}.Menu-module--menu--ETqdK{margin-bottom:26px}.Menu-module--menu--ETqdK .Menu-module--list--4a49Z{list-style:none;margin:0;padding:0}.Menu-module--menu--ETqdK .Menu-module--list--4a49Z .Menu-module--item--i2edw{margin:13px 0;padding:0}.Menu-module--menu--ETqdK .Menu-module--list--4a49Z .Menu-module--item--i2edw .Menu-module--link--pvAqj{border:0;color:#212121;font-size:16px;font-weight:400}.Menu-module--menu--ETqdK .Menu-module--list--4a49Z .Menu-module--item--i2edw .Menu-module--link--pvAqj:focus,.Menu-module--menu--ETqdK .Menu-module--list--4a49Z .Menu-module--item--i2edw .Menu-module--link--pvAqj:hover{border-bottom:1px solid #5c92ff;color:#5c92ff}.Menu-module--menu--ETqdK .Menu-module--list--4a49Z .Menu-module--item--i2edw .Menu-module--link--pvAqj.Menu-module--active--bLdMz{border-bottom:1px solid #212121;color:#212121}.Sidebar-module--sidebar--G-oUa{width:100%}.Sidebar-module--sidebar--G-oUa .Sidebar-module--inner--NE0Oo{padding:26px 19.5px 0;position:relative}@media screen and (min-width:685px){.Sidebar-module--sidebar--G-oUa{width:calc(41.625% - 17.5px)}.Sidebar-module--sidebar--G-oUa:nth-child(1n){clear:none;float:left;margin-right:30px}.Sidebar-module--sidebar--G-oUa:last-child{margin-right:0}.Sidebar-module--sidebar--G-oUa:nth-child(12n){float:right;margin-right:0}.Sidebar-module--sidebar--G-oUa:nth-child(12n+1){clear:both}.Sidebar-module--sidebar--G-oUa .Sidebar-module--inner--NE0Oo{padding:32.5px 19.5px 0}.Sidebar-module--sidebar--G-oUa .Sidebar-module--inner--NE0Oo:after{background:#e6e6e6;background:linear-gradient(180deg,#e6e6e6 0,#e6e6e6 48%,#fff);bottom:0;content:"";height:540px;position:absolute;right:-10px;top:30px;width:1px}}@media screen and (min-width:960px){.Sidebar-module--sidebar--G-oUa{width:calc(24.975% - 22.5px)}.Sidebar-module--sidebar--G-oUa:nth-child(1n){clear:none;float:left;margin-right:30px}.Sidebar-module--sidebar--G-oUa:last-child{margin-right:0}.Sidebar-module--sidebar--G-oUa:nth-child(4n){float:right;margin-right:0}.Sidebar-module--sidebar--G-oUa:nth-child(4n+1){clear:both}.Sidebar-module--sidebar--G-oUa .Sidebar-module--inner--NE0Oo{padding:39px}}.TotalSearch-module--search--aZIhb{background-color:#fff;display:flex;padding:16px 0;position:-webkit-sticky;position:sticky;top:0}.TotalSearch-module--search-keyword--iOIAR{border:1px solid gray;border-radius:4px;font-size:16px;font-weight:400;height:48px;padding:0 16px;width:100%}@media screen and (min-width:960px){.TotalSearch-module--skills-layout__back-button--YjdJg{left:30px;margin:0;max-width:auto;position:fixed;top:30px}.TotalSearch-module--skills-layout--9u5bv .TotalSearch-module--skills-wrap--mebnz{grid-template-columns:repeat(3,1fr)}}.Author-module--author--HFjbH{border-top:1px solid #e6e6e6;line-height:26px;margin-bottom:52px;margin-top:26px;max-width:950px;padding-top:26px}.Author-module--author--HFjbH .Author-module--bio--CJUED .Author-module--twitter--kGR0t{display:block;text-decoration:underline}@media screen and (min-width:685px){.Author-module--author--HFjbH{margin-left:auto;margin-right:auto}}.Content-module--content--gNWBo{margin:0 auto;max-width:1100px;padding:0 13px}.Content-module--content--gNWBo .Content-module--title--CVBL0{font-size:32px;font-weight:600;line-height:42.9px;margin:26px auto 0;max-width:950px;text-align:center}.Content-module--content--gNWBo .Content-module--body--cmwhi figure{margin-bottom:26px}.Content-module--content--gNWBo .Content-module--body--cmwhi figure blockquote{font-style:italic;margin-top:0;padding:26px 0;text-align:center}.Content-module--content--gNWBo .Content-module--body--cmwhi figure blockquote p{font-size:26.9072px;line-height:39px;margin-bottom:26px;margin-top:0;max-width:950px}.Content-module--content--gNWBo .Content-module--body--cmwhi a{text-decoration:underline}.Content-module--content--gNWBo .Content-module--body--cmwhi *{margin-left:auto;margin-right:auto;max-width:950px}.Content-module--content--gNWBo .Content-module--body--cmwhi h2>a{visibility:hidden}.Content-module--content--gNWBo .Content-module--body--cmwhi img{max-width:100%}@media screen and (min-width:960px){.Content-module--content--gNWBo{padding:0}.Content-module--content--gNWBo .Content-module--title--CVBL0{font-size:48px;line-height:58.5px;margin-bottom:39px;margin-top:58.5px}.Content-module--content--gNWBo .Content-module--body--cmwhi,.Content-module--content--gNWBo .Content-module--body--cmwhi p{font-size:18px;line-height:29.25px;margin-bottom:29.25px}.Content-module--content--gNWBo .Content-module--body--cmwhi h2>a{padding-right:26px;visibility:unset}}.Meta-module--meta--2uCvT .Meta-module--date--TTDWL{font-style:italic}.Tags-module--tags--GFiVM{margin-bottom:13px}.Tags-module--tags--GFiVM .Tags-module--list--gq5ra{list-style:none;padding:0}.Tags-module--tags--GFiVM .Tags-module--list--gq5ra .Tags-module--item--UgFWJ{display:inline-block;margin:13px 3.25px}@media screen and (min-width:685px){.Tags-module--tags--GFiVM .Tags-module--list--gq5ra .Tags-module--item--UgFWJ:first-child{margin-left:0;padding-left:0}}.Tags-module--tags--GFiVM .Tags-module--list--gq5ra .Tags-module--item--UgFWJ .Tags-module--link--5O4-1{border:1px solid #e6e6e6;border-radius:20px;color:#212121;display:inline-block;height:35px;line-height:35px;padding:0 19.5px;text-decoration:none}.Tags-module--tags--GFiVM .Tags-module--list--gq5ra .Tags-module--item--UgFWJ .Tags-module--link--5O4-1:focus,.Tags-module--tags--GFiVM .Tags-module--list--gq5ra .Tags-module--item--UgFWJ .Tags-module--link--5O4-1:hover{color:#5c92ff}.Post-module--post--OplAV .Post-module--content--PG5Wp{margin:0 auto}.Post-module--post--OplAV .Post-module--comments--07meJ,.Post-module--post--OplAV .Post-module--footer--\+HBcE{margin:0 auto;max-width:950px;padding:0 13px}.Post-module--post--OplAV .Post-module--button--Ufj7H{border:1px solid #e6e6e6;border-radius:20px;color:#212121;cursor:pointer;display:block;font-size:16px;font-weight:400;height:35px;line-height:35px;margin-left:auto;margin-right:auto;margin-top:26px;max-width:90px;padding:0 26px;text-align:center}.Post-module--post--OplAV .Post-module--button--Ufj7H:focus,.Post-module--post--OplAV .Post-module--button--Ufj7H:hover{color:#5c92ff}@media screen and (min-width:960px){.Post-module--post--OplAV .Post-module--comments--07meJ,.Post-module--post--OplAV .Post-module--footer--\+HBcE{padding:0}.Post-module--post--OplAV .Post-module--button--Ufj7H{left:30px;margin:0;max-width:none;position:fixed;top:30px}}.Tags-module--tags--KfLu\+{grid-gap:11px 20px;display:flex;flex-wrap:wrap}.Tags-module--tags__tag--nij2v{align-items:center;background:#f1f3f5;border-radius:20px;color:#0ca678;cursor:pointer;display:inline-flex;height:35px;padding:0 10px}</style><link rel="alternate" type="application/rss+xml" title="Blog by joohyung" href="/blog/rss.xml"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id="></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', '', {"send_page_view":false});
      }
      </script><link rel="sitemap" type="application/xml" href="/blog/sitemap/sitemap-index.xml"/><link rel="icon" href="/blog/favicon-32x32.png?v=a0e002f394141892bab003cbb7dcfd9b" type="image/png"/><link rel="manifest" href="/blog/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/blog/icons/icon-48x48.png?v=a0e002f394141892bab003cbb7dcfd9b"/><link rel="apple-touch-icon" sizes="72x72" href="/blog/icons/icon-72x72.png?v=a0e002f394141892bab003cbb7dcfd9b"/><link rel="apple-touch-icon" sizes="96x96" href="/blog/icons/icon-96x96.png?v=a0e002f394141892bab003cbb7dcfd9b"/><link rel="apple-touch-icon" sizes="144x144" href="/blog/icons/icon-144x144.png?v=a0e002f394141892bab003cbb7dcfd9b"/><link rel="apple-touch-icon" sizes="192x192" href="/blog/icons/icon-192x192.png?v=a0e002f394141892bab003cbb7dcfd9b"/><link rel="apple-touch-icon" sizes="256x256" href="/blog/icons/icon-256x256.png?v=a0e002f394141892bab003cbb7dcfd9b"/><link rel="apple-touch-icon" sizes="384x384" href="/blog/icons/icon-384x384.png?v=a0e002f394141892bab003cbb7dcfd9b"/><link rel="apple-touch-icon" sizes="512x512" href="/blog/icons/icon-512x512.png?v=a0e002f394141892bab003cbb7dcfd9b"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><title data-react-helmet="true">Serverless - Blog by joohyung</title></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="Layout-module--layout--LJM9v"><div class="Post-module--post--OplAV"><a class="Post-module--button--Ufj7H">뒤로가기</a><div class="Post-module--content--PG5Wp"><div class="Content-module--content--gNWBo"><h1 class="Content-module--title--CVBL0">Serverless</h1><div class="Content-module--body--cmwhi"><h1 id="serverless" style="position:relative;"><a href="#serverless" aria-label="serverless permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>serverless</h1>
<p>serverless-boilerplate</p>
<p>샘플 코드는 <a href="https://github.com/qweasd147/serverless-boilerplate" target="_blank" rel="nofollow noopener noreferrer">serverless-boilerplate</a> 여기서 확인 가능</p>
<p>서버 자원을 전혀 고려하지 않아도 된다는 취지로 만들어 졌지만 aws를 기준으로 성능을 위해서라면 memory용량을 늘리고 memory 용량을 늘려야 cpu 성능이 좋아져, 이러한 점도 신경써야 한다는 안타까운 점이 존재.
(aws만 그런지 다른 서비스도 그런지는 모르겠음)</p>
<p>안타까운점이 있지만 일정시간 이상 람다 트리거가 발동하지 않으면 <code class="language-text">idle</code>상태로 빠지고 이러한 점 때문인지 일반적으로 <code class="language-text">ec2</code>로 인스턴스를 올리는것보다 비용이 싸게 먹힌다고 한다.
단, 람다는 요청 단위로 과금이 결정되서 비교가 힘들긴 하지만 요청이 많으면 <code class="language-text">ec2</code>보다 훨씬 비싸다고 한다.</p>
<h2 id="1-연관-플러그인" style="position:relative;"><a href="#1-%EC%97%B0%EA%B4%80-%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8" aria-label="1 연관 플러그인 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 연관 플러그인</h2>
<p>개발하면서 발견한 유용한 플러그인 등을 소개</p>
<h3 id="11-환경변수를-관리하고-싶을때" style="position:relative;"><a href="#11-%ED%99%98%EA%B2%BD%EB%B3%80%EC%88%98%EB%A5%BC-%EA%B4%80%EB%A6%AC%ED%95%98%EA%B3%A0-%EC%8B%B6%EC%9D%84%EB%95%8C" aria-label="11 환경변수를 관리하고 싶을때 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.1 환경변수를 관리하고 싶을때</h3>
<p>-> <code class="language-text">serverless-dotenv-plugin</code>을 사용한다.
각 서비스 환경(dev, staging, product 등)별 환경변수를 관리하고 사용하고 싶을때 매우 유용하게 써먹을수 있다.</p>
<h3 id="12-요청에-대한-전처리-등이-필요할때" style="position:relative;"><a href="#12-%EC%9A%94%EC%B2%AD%EC%97%90-%EB%8C%80%ED%95%9C-%EC%A0%84%EC%B2%98%EB%A6%AC-%EB%93%B1%EC%9D%B4-%ED%95%84%EC%9A%94%ED%95%A0%EB%95%8C" aria-label="12 요청에 대한 전처리 등이 필요할때 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.2 요청에 대한 전처리 등이 필요할때</h3>
<p>-> <code class="language-text">aws-serverless-koa</code>또는 <code class="language-text">aws-serverless-express</code>를 사용한다.</p>
<p>처음엔 그냥 람다 만들고 <code class="language-text">API Gateway</code>로 연결해서 쓰면 됬지 뭐하라 사용하나 싶었는데 일단 이런 프레임워크를 쓰니까 <code class="language-text">middleware</code>처리나 <code class="language-text">router</code>를 활용할 수 있어서 편하다. 또 프레임 워크(<code class="language-text">koa</code> or <code class="language-text">express</code>)를 사용하지 않고 개발하다보면 파라미터 파싱하기도 귀찮고 lambda에 의존되는 코드(파라미터 가져오기, 응답값 내보내기 등)가 생기는데 이러한 부분을 프레임워크를 써서 처리해주니까 순수 nodejs만 개발한 사람은 lambda 레퍼런스 보는 시간이 줄어 든거 같다.</p>
<h3 id="13-로그를-남기고-싶을때" style="position:relative;"><a href="#13-%EB%A1%9C%EA%B7%B8%EB%A5%BC-%EB%82%A8%EA%B8%B0%EA%B3%A0-%EC%8B%B6%EC%9D%84%EB%95%8C" aria-label="13 로그를 남기고 싶을때 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.3 로그를 남기고 싶을때</h3>
<p>일반적으로 <code class="language-text">Lambda</code>는 <code class="language-text">console.log</code>같은걸 쓰면 알아서 <code class="language-text">cloudwatch logs</code>에 남긴다. 근데 이게 개발하면서 디버깅용 로그를 사용할때가 분명 많을 것이다. 하지만 일단 <code class="language-text">console.log</code>를 사용하면 무조건 <code class="language-text">cloudwatch logs</code>에 남는다. 그렇다고 개발 이후에 로그를 남긴 소스를 주석처리하기도 쫌 그렇다… 테스트는 안해봤지만 info, warn, error 등도 남을 것이고, debug는 모르겠다. 아무튼 각 로그 레벨 설정에 따른 로그를 남기고 싶을땐 예전 nodejs로 개발할때는 <code class="language-text">winston</code>을 사용했었는데 <code class="language-text">serverless</code> 플러그인 중에도 <code class="language-text">winston-cloudwatch</code>가 있었다.</p>
<p>하지만 뭔가 셋팅이 점점 늘어나, serverless framework를 쓰면서 특정 모듈별 간편하게 개발하는 기분이 들지 않아서 사용해보진 않았다. 규모가 쫌 커지면 그때 사용을 고려해볼 예정이다.</p>
<h3 id="14-이진-데이터-지원파일" style="position:relative;"><a href="#14-%EC%9D%B4%EC%A7%84-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A7%80%EC%9B%90%ED%8C%8C%EC%9D%BC" aria-label="14 이진 데이터 지원파일 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.4 이진 데이터 지원(파일)</h3>
<p>기본적으로 multipart로 파일을 보내면 <code class="language-text">API Gateway</code>에서 지원을 하지 않아서 처리가 불가능하다. 별도로 <code class="language-text">API Gateway</code>에 들어가서 파일을 이진 데이터 형태로 지원하게끔 설정할 수도 있지만 이를 plugin을 설치 &#x26; 셋팅해서 배포하면서 그냥 한번에 셋팅 되도록 할 수도 있다. <code class="language-text">serverless-apigw-binary</code> 검색</p>
<h3 id="15-include-modules" style="position:relative;"><a href="#15-include-modules" aria-label="15 include modules permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.5 include modules</h3>
<p>작업하면서 로컬환경에서는 잘 작동하는데 aws에 배포하기만 하면 <code class="language-text">mysql2</code> 모듈을 찾을 수 없다고 나온다. 이는 아마도 배포되면서 <code class="language-text">Code-Splitting</code>이 이루어지고, <code class="language-text">mysql2</code> 모듈은 사용하지 않아서 함께 배포가 되지 않는듯 싶다(<code class="language-text">mysql2</code> 모듈은 설정값에 따라 동적으로 불러온다). 이러한 버그를 방지하기 위해서 강제적으로 배포 되도록 설정이 필요하다.</p>
<p><code class="language-text">serverless.yml</code></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">custom:
  webpack:
    webpackConfig: ./webpack.config.js
    includeModules:
      forceInclude:
        - mysql2</code></pre></div>
<h2 id="2-주의사항" style="position:relative;"><a href="#2-%EC%A3%BC%EC%9D%98%EC%82%AC%ED%95%AD" aria-label="2 주의사항 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. 주의사항</h2>
<h3 id="21-cold-star--warm-start" style="position:relative;"><a href="#21-cold-star--warm-start" aria-label="21 cold star  warm start permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2.1 cold star &#x26; warm start</h3>
<p>앞서 설명한대로 일정시간 함수가 실행되지 않으면 컨테이너가 종료된 상태로 유지된다. 그러면서 생긴 문제점은 이렇게 종료된 상태에서 함수 트리거가 발동되면 다시 컨테이너를 올리는것부터 시작된다. 이떄의 start를 <code class="language-text">cold start</code>라고 한다. 반대로 주기적으로 실행되면서 컨테이너 시작부터가 아닌 그냥 함수를 바로 시행하는 start를 <code class="language-text">warm start</code>라고 한다.</p>
<p>만약 <code class="language-text">cold start</code>를 하게되면 당연히 시간이 오래걸리게 된다. 프로그램마다 다 다르겠지만 그래도 1~3초 정도 더 추가적으로 걸린다고 한다. 이러한 시간을 낭비하려면 어쩔수없이 주기적으로 함수를 실행시켜 컨테이너가 종료되는 것을 막는것 밖에 없다고 한다(<code class="language-text">aws</code>에서도 따로 가이드가 없다고 함). health check api를 만들어 주기적으로 만들던가 <code class="language-text">cloud watch</code>를 통해 이벤트 트리거를 주기적으로 발동 시키는게 그나마 최선이라고 한다. <code class="language-text">2019 kakao developer</code> 세미나에서 자신들이 테스트해본 결과 300초 이하로 주기적으로 발동시키면 <code class="language-text">warm start</code>가 발동 되지 않는다고 하고, 혹시 몰라서 60초정도로 주기적으로 함수를 발동시킨다고 하였다.</p>
<h3 id="22-concurrency" style="position:relative;"><a href="#22-concurrency" aria-label="22 concurrency permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2.2 Concurrency</h3>
<h4 id="reserved-concurrency" style="position:relative;"><a href="#reserved-concurrency" aria-label="reserved concurrency permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reserved Concurrency</h4>
<p>함수가 실행되는 동시 개수를 제한한다. 이는 계정 &#x26; 리전별로 제한이 있으니까, 중요한 함수와 널널한 함수를 나누어서 각각 따로 제한을 두는게 좋다. 말이 좋아 서버리스지 알면 알수록 성능 튜닝 요소 &#x26; 제한이 은근히 있다(물론 서버를 직접 구축하는것 보단 훨씬 적지만).</p>
<p>아무튼 <code class="language-text">capacity</code>값을 셋팅하여 해당 리전의 함수를 동시 실행 개수를 제한해서 다른 함수 실행을 보장 할 수있다.</p>
<p><strong>2019년에 추가된 사항</strong></p>
<h4 id="provisioned-concurrency" style="position:relative;"><a href="#provisioned-concurrency" aria-label="provisioned concurrency permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Provisioned Concurrency</h4>
<p><code class="language-text">cold start</code>와 <code class="language-text">Concurrency</code>문제를 해결하기 위해 <code class="language-text">Provisioned Concurrency</code>가 나왔다(<code class="language-text">Concurrency</code>는 해결이라기보다는 한곳에서 관리가 가능하다). lambda에 보면
셋팅이 직관적으로 나와있어서 쉽게 셋팅이 가능하고 해놓으면 항상 대기상태인 vm만들어 놓는다. 근데 이 셋팅을 하면 과금 정책이 <code class="language-text">요청 &amp; 처리 시간</code>이 아니라
ec2처럼 그냥 돈이 계속 나가기 때문에 좋은건지 모르겠다(이쯤 되면 ec2도 한번쯤 생각해봐야 한다고 생각) 물론 <code class="language-text">auto scaling</code> 엄청 좋긴하지만</p>
<p><strong>TODO</strong>
servlerless로 Provisioned Concurrency 핸들링</p>
<h3 id="23-api-gateway를-통한-제한" style="position:relative;"><a href="#23-api-gateway%EB%A5%BC-%ED%86%B5%ED%95%9C-%EC%A0%9C%ED%95%9C" aria-label="23 api gateway를 통한 제한 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2.3 API Gateway를 통한 제한</h3>
<p>트리거를 API Gateway를 통해 제한 할 수도 있다. cors를 제한해서 허용된 host만 처리한다던지, API를 발급 &#x26; import해서 인증된 request만 함수를 발동하도록 실행 제한이 가능하다.
사용계획도 한번에 셋팅하여 일별 or 월별 사용량도 제한할 수 있긴 하다.</p>
<h3 id="24-함수-실행시간" style="position:relative;"><a href="#24-%ED%95%A8%EC%88%98-%EC%8B%A4%ED%96%89%EC%8B%9C%EA%B0%84" aria-label="24 함수 실행시간 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2.4 함수 실행시간</h3>
<p>람다 실행당 최대 15분 까지만 실행된다. 오래된 문서나 <code class="language-text">overflow</code> 보면 3분? 5분?이라고 나와있는데 늘어났다. 아무튼 그 이상 걸리는 작업은 다른 서비스(<code class="language-text">aws batch</code>)등을 써야한다.</p>
<h3 id="25-remove" style="position:relative;"><a href="#25-remove" aria-label="25 remove permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2.5 remove</h3>
<p><code class="language-text">$ sls remove</code> 옵션을 사용하여 원격 배포된 <code class="language-text">serverless</code> 내용을 없앨수 있다. 하지만 이는 매우매우 위험하다. 만약 db등의 리소스가 <code class="language-text">serverless</code>에 등록되어 있다면 <code class="language-text">remove</code>시에 함께 테이블 정보도 싹다 날라간다. 당연히 <code class="language-text">cloud watch</code>에 쌓인 로그도 함께 날라간다. 따라서 이를 방지하려면 귀찮더라도 DB는 <code class="language-text">serverless</code>에서 관리되는게 아닌 그냥 직접 관리해서 접근 하거나 그냥 함부로 삭제가 아닌 소스 업데이트만 사용해야 한다.</p>
<h3 id="26-callbackwaitsforemptyeventloop" style="position:relative;"><a href="#26-callbackwaitsforemptyeventloop" aria-label="26 callbackwaitsforemptyeventloop permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2.6 callbackWaitsForEmptyEventLoop</h3></div></div></div><div class="Post-module--footer--+HBcE"><div class="Meta-module--meta--2uCvT"><p class="Meta-module--date--TTDWL">Published<!-- --> <!-- -->Feb 8, 2016</p></div><div class="Tags-module--tags--GFiVM"><ul class="Tags-module--list--gq5ra"><li class="Tags-module--item--UgFWJ"><a class="Tags-module--link--5O4-1" href="/blog/tag/serverless/">serverless</a></li><li class="Tags-module--item--UgFWJ"><a class="Tags-module--link--5O4-1" href="/blog/tag/aws/">aws</a></li><li class="Tags-module--item--UgFWJ"><a class="Tags-module--link--5O4-1" href="/blog/tag/lambda/">lambda</a></li><li class="Tags-module--item--UgFWJ"><a class="Tags-module--link--5O4-1" href="/blog/tag/nodejs/">nodejs</a></li></ul></div><div class="Author-module--author--HFjbH"><p class="Author-module--bio--CJUED"><a class="Author-module--twitter--kGR0t" href="https://github.com/qweasd147" rel="noopener noreferrer" target="_blank"><strong>Kim joohyung</strong> on Github</a></p></div></div><div class="Post-module--comments--07meJ"></div></div><div class="Layout-module--layout-doc-mask--qkYmG"></div><div class="SideButton-module--sides--sxqRm"><a class="SideButton-module--sides-button--pA2tl SideButton-module--sides-button-hide--GhQ0J">Up</a></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/aws/aws-serverless/";window.___webpackCompilationHash="ab6b0fc8e4a939513978";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-4f8c4c04526091b1ccaa.js"],"app":["/app-5ac963d69baf2724a083.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-0f5b8a073afc45a4d929.js"],"component---src-components-custompage-skills-skills-tsx":["/component---src-components-custompage-skills-skills-tsx-97fdc4b7a905ae978e10.js"],"component---src-components-custompage-total-search-total-search-tsx":["/component---src-components-custompage-total-search-total-search-tsx-08419b3e938784dd785f.js"],"component---src-templates-categories-template-categories-template-tsx":["/component---src-templates-categories-template-categories-template-tsx-83e475c60c95cb6b96d1.js"],"component---src-templates-category-template-category-template-tsx":["/component---src-templates-category-template-category-template-tsx-a454d0cbd03868634e25.js"],"component---src-templates-index-template-index-template-tsx":["/component---src-templates-index-template-index-template-tsx-5bad396dbda35551f5c8.js"],"component---src-templates-not-found-template-not-found-template-tsx":["/component---src-templates-not-found-template-not-found-template-tsx-5cfd3d75928bd822a7ec.js"],"component---src-templates-post-template-post-template-tsx":["/component---src-templates-post-template-post-template-tsx-b5210253965c870a7e20.js"],"component---src-templates-tag-template-tag-template-tsx":["/component---src-templates-tag-template-tag-template-tsx-d069cc9e166eee793c5d.js"],"component---src-templates-tags-template-tags-template-tsx":["/component---src-templates-tags-template-tags-template-tsx-d4b43f7d3f69fd005244.js"]};/*]]>*/</script><script src="/blog/polyfill-4f8c4c04526091b1ccaa.js" nomodule=""></script><script src="/blog/app-5ac963d69baf2724a083.js" async=""></script><script src="/blog/framework-5aab6d6db7fbdb045164.js" async=""></script><script src="/blog/webpack-runtime-d8ed385cb558efbb7e56.js" async=""></script></body></html>